# Shading: Shading,Pipeline and Texture Mapping

# 7.1 目前的进度和局限

![Rotating Cubes](https://pphkpublicbucket.oss-cn-hongkong.aliyuncs.com/ppblog/2021/02/image-105.png-mymark)

能够用上面的方法绘制场景，即可做出如图的效果。但这样是不够的。我们想得到下面的效果

![Rotating Cubes Expected](https://pphkpublicbucket.oss-cn-hongkong.aliyuncs.com/ppblog/2021/02/image-106.png-mymark)

为什么会这样呢？为什么“相同”颜色的方块的每一面颜色不一致呢？容易发现，是环境光的影响。我们看到的物体画面是由物体本身和环境光共同作用得到的结果。所以需要考虑环境光。这个共同作用的方式，则体现出了物体的材质。

# 7.2 Shading 是什么

![Shading: Definition](https://pphkpublicbucket.oss-cn-hongkong.aliyuncs.com/ppblog/2021/02/image-107.png-mymark)

而 Shading 在本课中则对应着将材质应用于物体本身的过程。

# 7.3 Blinn-Phone 模型介绍

![A Simple Shading Model](https://pphkpublicbucket.oss-cn-hongkong.aliyuncs.com/ppblog/2021/02/image-108.png-mymark)

Blinn-Phong 是经验总结下的容易实现的材质模型。其原理来自于观察：当光源和观察者的方向接近时，物体的颜色会变得更亮。而当光源和观察者的方向相反时，物体的颜色会变得更暗。

![Perceptual Observations](https://pphkpublicbucket.oss-cn-hongkong.aliyuncs.com/ppblog/2021/02/image-109.png-mymark)

类似于绘画中的三大面。可以把物体表面分为高光区域、漫反射区域、环境光区域。

![Shading is Local](https://pphkpublicbucket.oss-cn-hongkong.aliyuncs.com/ppblog/2021/02/image-110.png-mymark)

需要注意的是，Shading 有局部性，只关心每个三角形本身，不关心三角形相互的作用，

# 7.4 Blinn-Phone 漫反射

![Lambertian (Diffuse) Shading](https://pphkpublicbucket.oss-cn-hongkong.aliyuncs.com/ppblog/2021/02/image-111.png-mymark)

Blinn-Phong 模型中，漫反射的颜色受到三个部分影响

- 材料的固有色，对应一个系数（可为颜色向量）$k_d$
- 反光点和光源的距离光源，距离越远亮度越底，对应于 $𝐼/𝑟^2$
- 表面法线与光线的夹角，夹角越大则单位面积能反射的光子理应越少，一旦大过 $𝜋/2$ 则意味着背光，不再漫反射。于是对应于 $𝑚𝑎𝑥(0,𝑛∗𝑙)$

![Lambertian (Diffuse) Shading](https://pphkpublicbucket.oss-cn-hongkong.aliyuncs.com/ppblog/2021/02/image-112.png-mymark)
